> 此文档由OpenAI GPT-4辅助生成，参考[链接](https://chat.openai.com/)
# GitHub项目协作手册

## 开发环境设置

### 软件要求

- **Python版本**：Python 3.8。
- **IDE**：VS Code/Cursor。
- **依赖管理**：使用`pip`和`virtualenv`或`docker`环境来管理依赖。

### 环境搭建

<details>
<summary>pip+virtualenv</summary>

- 克隆项目仓库：

   ```bash
   git clone https://github.com/Bili-Sakura/GPT4DST.git
   cd GPT4DST
   ```
- 创建并激活虚拟环境：

   ```bash
   python -m venv .venv/gpt4dst  # 创建名为gpt4dst的虚拟环境，路径位于.venv下
   source .ven/gpt4dst/bin/activate  # Unix-like systems
   .\.venv\gpt4dst\Scripts\activate  # Windows
   ```  
- 安装依赖：

   ```bash
   pip install -r requirements.txt
   ```
- 退出虚拟环境：

   ```bash
   .\.venv\gpt4dst\Scripts\deactivate
   ```
</details>

<details>
<summary>docker</summary>

- 克隆项目仓库：

   ```bash
   git clone https://github.com/Bili-Sakura/GPT4DST.git
   cd GPT4DST

   ```
- 安装`Docker`

   **Linux系统安装教程：**

   1. 更新包索引并安装必要的依赖：
      ```
      sudo apt update
      sudo apt install apt-transport-https ca-certificates curl software-properties-common
      ```

   2. 添加Docker官方GPG密钥：
      ```
      curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
      ```

   3. 设置Docker稳定版仓库：
      ```
      sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
      ```

   4. 安装Docker：
      ```
      sudo apt update
      sudo apt install docker-ce
      ```

   5. 验证安装：
      ```
      sudo systemctl status docker
      ```

   **Windows系统安装教程：**

   1. 下载Docker Desktop安装程序：[Docker Desktop for Windows](https://hub.docker.com/editions/community/docker-ce-desktop-windows)

   2. 双击安装程序并按照提示进行安装。

   3. 启动Docker Desktop应用。

   4. 验证安装：
      打开命令提示符（CMD）或PowerShell，运行以下命令：
      docker --version

- 创建/检查`Dockerfile`文件：

   ```dockerfile
   # 使用官方Python运行时作为父镜像
   FROM python:3.8

   # 设置工作目录为/app
   WORKDIR /app

   # 将当前目录内容复制到位于/app中的容器中
   COPY . /app

   # 使用pip安装requirements.txt中列出的任何所需包
   RUN pip install --no-cache-dir -r requirements.txt

   # 使端口80可用于此容器外的环境
    EXPOSE 80

   # 定义环境变量（可选）
   # ENV NAME GPT4DST

   # 在容器启动时运行app.py
   CMD ["python", "app.py"]
   ```
   
- 使用`docker`：  

   ```bash
   # 构建Docker镜像
   docker build -t gpt4dst .
   # 运行Docker容器
   docker run -p 4000:80 gpt4dst
   ```

这里，`gpt4dst`是你为镜像选择的名称。`docker build`命令构建镜像，`-t`标志用于标记或命名你的镜像。`docker run`命令启动一个新容器，`-p`标志用于将容器的端口映射到主机的端口，格式为`<host-port>:<container-port>`。
</details>

## GitHub协作流程

<details>
<summary>如何处理虚拟环境和Git协作</summary>

- 共享`requirements.txt`：确保将`requirements.txt`文件加入到Git版本控制中。这样，团队成员可以使用此文件来创建并激活自己的虚拟环境，并安装所有必需的依赖。

   ```bash
   pip freeze > requirements.txt #更新环境
   ```
</details>

### 分支策略

- 主分支`main`：包含生产环境的最新稳定版本。
- 开发主分支`dev`：用于日常开发的最新稳定版本。
- 开发主分支`dev/TeamMember1`：`TeamMember1`的开发分支。
- 开发主分支`dev/TeamMember2`：`TeamMember2`的开发分支。
- ~~功能分支`feature/<功能名>`：从`dev`分支派生，用于开发新功能。~~
- ~~修复分支`fix/<修复名>`：从`dev`分支派生，用于修复bug。~~


### Commit基本语法

<details>
<summary>查看详细说明</summary>

合理的commit信息能够清晰描述更改的目的和范围，有助于团队成员理解和追踪项目的发展。一个好的commit信息应该遵循以下基本格式：

```
<类型>(<范围>): <描述>
```

- **类型**：描述commit目的的关键词，如`fix`、`feat`、`docs`等。
- **范围**：可选项，指明更改影响的项目部分。
- **描述**：简短明了地说明更改的内容。

### 常见Commit类型及示例

以下是一些常见的commit类型，以及相应的示例：

- **修复Bug**: `fix`类型用于修复项目中的bug。
  - 示例: `fix(login): 修复因缓存导致的登录问题`
- **新功能**: `feat`类型用于引入新的功能或特性。
  - 示例: `feat(chart): 添加数据可视化图表`
- **文档更改**: `docs`类型用于更新项目文档。
  - 示例: `docs(readme): 更新安装指导`
- **性能优化**: `perf`类型用于代码性能优化。
  - 示例: `perf(db): 优化数据库查询效率`
- **代码风格**: `style`类型用于不影响代码含义的更改（空格、格式化、缺少分号等）。
  - 示例: `style(format): 代码格式化`
</details>

### 多文件Commit语法

<details>
<summary>查看详细说明</summary>

当同时更新多个文件且每个文件需要不同的commit信息时，可以通过逐个添加和提交这些文件实现：

```bash
# 添加并提交第一个文件
git add <文件1路径>
git commit -m "<类型1>(<范围1>): <描述1>"

# 添加并提交第二个文件
git add <文件2路径>
git commit -m "<类型2>(<范围2>): <描述2>"

# 重复以上步骤直至所有文件处理完毕
```
</details>

### 代码协作流程及指令

<details>
<summary>查看详细说明</summary>

1. **克隆仓库**：从远程仓库克隆项目到本地。
   ```bash
   git clone <仓库URL>
   ```
2. **创建新分支**：基于最新的主分支创建新的工作分支。
   ```bash
   git checkout -b <新分支名>
   ```
3. **提交更改**：开发完成后，提交更改到本地仓库。
   ```bash
   git add .
   git commit -m "<类型>: <描述>"
   ```
4. **同步远程更改**：定期从远程仓库拉取最新更改，保持本地分支更新。
   ```bash
   git pull origin <基准分支>
   ```
5. **推送分支**：将本地分支推送到远程仓库。
   ```bash
   git push origin <分支名>
   ```
~~6. **创建合并请求（MR/PR）**：在远程仓库创建合并请求，请求将更改合并到基准分支。~~

</details>

## 编码规范

> 使用Pylint - PEP 8

<details>
<summary>查看详细说明</summary>

### Pylint简介

Pylint是一个Python静态代码分析工具，用于查找编程错误、帮助遵守编码标准以及推荐重构。Pylint提供了多项功能，包括检查代码中的错误、强制执行编码标准、查找代码中的坏味道以及提供重构建议。

### Pylint的主要特点

- **错误检测**：Pylint可以识别语法错误、运行时错误、不一致的命名方式等问题。
- **代码标准强制**：Pylint默认遵循PEP 8编码规范，并可以自定义规则。
- **代码质量评分**：Pylint会给代码一个0到10的评分，帮助开发者识别可能需要重构的代码部分。

### 在VSCode中配置Pylint

要在VSCode中使用Pylint，请按照以下步骤操作：

1. **安装Pylint**：
   如果你还没有安装Pylint，可以通过pip在你的Python环境中安装它：
   ```bash
   pip install pylint
   ```

2. **安装Python扩展**：
   确保你已经安装了VSCode的Python扩展。可以在VSCode扩展市场中搜索“Python”并安装由Microsoft提供的扩展。

3. **配置Pylint**：
   VSCode的Python扩展会自动寻找并使用已安装的Pylint。你可以通过`.vscode/settings.json`文件在项目层面上自定义Pylint的行为。如果`.vscode/settings.json`文件不存在，你可以创建它。

   打开或创建`.vscode/settings.json`文件，并添加以下配置：

   ```json
   {
   "pylint.args": [
      "--disable=C0111" // 例如，禁用缺少函数docstring的警告
      // 在这里添加其他Pylint参数
   ]
   }
   ```

4. **使用Pylint**：
   保存所有更改后，Pylint将在你打开的Python文件中自动运行。如果Pylint发现了问题，它会在VSCode的“问题”面板中显示，并直接在编辑器中高亮显示问题代码。

5. **自定义Pylint规则**：
   你可以在项目根目录下创建一个`pylintrc`文件来自定义Pylint的规则。例如：

   ```bash
   pylint --generate-rcfile > .pylintrc
   ```

   这将生成一个默认的配置文件，你可以根据需要编辑它。

### `PEP 8` 编码规范介绍（选读）
> 已经集成在Pylint中
PEP 8是Python的官方编码风格指南，旨在提高Python代码的可读性和一致性。以下是PEP 8编码规范的一些关键点概述：

#### 缩进

- 使用4个空格作为每级缩进。
- 续行应该与其包裹元素对齐，或使用Python的隐式行连接内使用垂直对齐，或使用悬挂缩进。

#### 行宽

- 每行不超过79个字符，以便于在小屏幕上查看，同时允许多个代码文件并排显示。
- 长表达式可以通过在括号内换行并添加额外的缩进来分成多行，以提高可读性。

#### 空格

- 在二元运算符两侧使用一个空格，如赋值(`=`)、比较(`==`, `<`, `>`, `!=`, `<=`, `>=`, `in`, `not in`, `is`, `is not`)、布尔运算(`and`, `or`, `not`)。
- 用空格分隔逗号后的项。
- 函数参数列表、索引或切片的括号内不要添加多余的空格。

#### 注释

- 注释应该是完整的句子。如果注释是短语或句子，其首字母应该大写，除非它以代码中的小写字母开头的标识符开始。
- 使用内联注释时，确保注释与代码语句间隔至少两个空格。

#### 命名约定

- 函数名、变量名应使用小写字母，单词间以下划线分隔（`snake_case`）。
- 类名应使用首字母大写的约定（`CamelCase`）。
- 对于受保护的实例属性，使用单个前导下划线（`_variable`）。
- 对于私有实例属性，使用两个前导下划线（`__variable`）。

#### 导入

- 导入应该总是放在文件顶部。
- 每个导入应该单独一行。
- 导入应该按照以下顺序分组：
  1. 标准库导入。
  2. 相关第三方库导入。
  3. 本地应用/库特定导入。

  在每组之间加上一个空行。

#### 表达式和语句中的空白

- 避免在以下情况中添加多余的空格：括号内、列表索引或函数调用的括号前、多个赋值前、逗号、分号、冒号前等。

#### 编程建议

- 不要使用复杂的表达式，即使表达式可以用一行代码实现。为了可读性，最好分成几行。
- 避免在`if`、`for`、`while`语句中使用`else`块，如果`if`、`for`、`while`语句中包含了`break`或`return`。

#### 更多

这只是PEP 8的一些基本指南。完整的指南请参考[PEP 8 -- Style Guide for Python Code](https://www.python.org/dev/peps/pep-0008/)。

</details>

## 文档
- 使用`README.md`文件，此文件面向用户，主要提供项目概述和安装指南。
- 代码中使用docstrings详细记录函数和类的用途及参数。
- docs路径下存放项目协作和开发相关文档，面向开发者。

## 持续集成/持续部署 (CI/CD)
- ~~配置GitHub Actions或其他CI/CD工具自动运行测试。~~
- ~~设置自动部署流程，将`main`分支的代码部署到生产环境。~~



